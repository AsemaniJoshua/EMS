function setupSidebar(){const sidebar=document.getElementById("sidebar"),sidebarOverlay=document.getElementById("sidebarOverlay"),mobileSidebarToggle=document.getElementById("mobileSidebarToggle");mobileSidebarToggle&&sidebar&&mobileSidebarToggle.addEventListener("click",(function(){sidebar.classList.toggle("-translate-x-full"),sidebarOverlay&&(sidebarOverlay.classList.toggle("opacity-0"),sidebarOverlay.classList.toggle("pointer-events-none"))})),sidebarOverlay&&sidebarOverlay.addEventListener("click",(function(){sidebar.classList.add("-translate-x-full"),sidebarOverlay.classList.add("opacity-0"),sidebarOverlay.classList.add("pointer-events-none")}))}function setupProfileDropdown(){const profileMenuButton=document.getElementById("profileMenuButton"),profileMenu=document.getElementById("profileMenu");profileMenuButton&&profileMenu&&(profileMenuButton.addEventListener("click",(function(){profileMenu.classList.toggle("hidden")})),document.addEventListener("click",(function(event){profileMenuButton.contains(event.target)||profileMenu.contains(event.target)||profileMenu.classList.add("hidden")})))}function showNoDataMessage(element,message){const messageDiv=document.createElement("div");messageDiv.className="flex items-center justify-center h-40 text-gray-500",messageDiv.innerHTML=`\n        <div class="text-center">\n            <i class="fas fa-chart-bar text-3xl mb-2 opacity-30"></i>\n            <p>${message}</p>\n        </div>\n    `,element.style.display="none",element.parentNode.appendChild(messageDiv)}function initExamStatusChart(){const ctx=document.getElementById("examStatusChart").getContext("2d"),chartCanvas=document.getElementById("examStatusChart");try{const chartData=JSON.parse(chartCanvas.getAttribute("data-chart")||'{"labels":[],"data":[]}');if(0===chartData.labels.length)return void showNoDataMessage(chartCanvas,"No exam status data available");new Chart(ctx,{type:"doughnut",data:{labels:chartData.labels,datasets:[{data:chartData.data,backgroundColor:["#10B981","#F59E0B","#EF4444","#6B7280","#3B82F6"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Exam Status Distribution"}}}})}catch(error){console.error("Error initializing exam status chart:",error),showNoDataMessage(chartCanvas,"Error loading chart data")}}document.addEventListener("DOMContentLoaded",(function(){const Toast=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:toast=>{toast.addEventListener("mouseenter",Swal.stopTimer),toast.addEventListener("mouseleave",Swal.resumeTimer)}});setupSidebar(),setupProfileDropdown(),window.deleteExam=function(examId){Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",confirmButtonText:"Yes, delete it!"}).then((result=>{result.isConfirmed&&axios.post("/api/exam/deleteExam.php",{exam_id:examId}).then((function(response){"success"===response.data.status?(Toast.fire({icon:"success",title:"Exam deleted successfully!"}),setTimeout((()=>{window.location.reload()}),1500)):Toast.fire({icon:"error",title:response.data.message||"Failed to delete exam"})})).catch((function(error){console.error("Delete exam error:",error),Toast.fire({icon:"error",title:"Network error. Please try again."})}))}))},document.getElementById("examStatusChart")&&initExamStatusChart(),document.getElementById("resultsChart")&&initResultsChart()}));